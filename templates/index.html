<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ParkIQ — AI-Powered Parking Prediction</title>
  <meta name="description" content="ParkIQ: IoT-powered parking intelligence for commercial operators. Real-time sensor data and AI predictions for optimized parking management." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- For production, consider building Tailwind locally: https://tailwindcss.com/docs/installation -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: 'Inter', system-ui, -apple-system, sans-serif; background: #f8fafc; color: #0f172a; }
    .glass { background: rgba(255,255,255,0.92); backdrop-filter: blur(6px); }
    .btn-focus { box-shadow: 0 8px 24px rgba(14,165,233,0.12); transform: translateY(-1px); }
    .sr-only { position: absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
    .hero-bg { background-image: url('https://images.unsplash.com/photo-1558618666-fcd25c85cd64?auto=format&fit=crop&w=1600&q=80'); background-size: cover; background-position: center; }
    .hero-overlay { background: linear-gradient(135deg, rgba(15,23,42,0.8), rgba(14,165,233,0.6)); }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <header class="w-full bg-white/90 border-b sticky top-0 z-40">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-10 w-10 rounded-lg bg-gradient-to-br from-blue-600 to-cyan-500 flex items-center justify-center text-white font-bold">P</div>
        <div>
          <div class="text-lg font-semibold leading-tight">ParkIQ</div>
          <div class="text-xs text-slate-500">IoT Sensor & AI Model</div>
        </div>
      </div>
      <nav class="hidden sm:flex gap-4 text-sm text-slate-600">
        <a href="#predict" class="hover:text-blue-600">Predict</a>
        <a href="#how" class="hover:text-blue-600">How it works</a>
      </nav>
    </div>
  </header>

  <main class="flex-grow">
    <section class="relative hero-bg hero-overlay text-white py-20">
      <div class="absolute inset-0 hero-overlay"></div>
      <div class="relative max-w-6xl mx-auto px-4 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        <div class="space-y-6">
          <h1 class="text-4xl sm:text-5xl font-bold leading-tight">IoT-Powered Parking Intelligence for <span style="background:linear-gradient(90deg,#ffffff,#e0f2fe);background-clip:text;-webkit-background-clip:text;color:transparent">Commercial Operators</span></h1>
          <p class="text-slate-200 max-w-xl text-lg">Deployed IoT sensor networks in parking facilities provide real-time occupancy data. Our AI model analyzes historical patterns to predict slot availability, optimizing space utilization and reducing congestion for businesses.</p>
          <dl class="grid grid-cols-1 gap-3 sm:grid-cols-3 text-sm">
            <div class="p-4 rounded-lg bg-white/10 backdrop-blur">
              <dt class="text-slate-300">IoT Sensors</dt>
              <dd class="font-semibold text-white">Real-time monitoring</dd>
            </div>
            <div class="p-4 rounded-lg bg-white/10 backdrop-blur">
              <dt class="text-slate-300">AI Predictions</dt>
              <dd class="font-semibold text-white">Machine learning accuracy</dd>
            </div>
            <div class="p-4 rounded-lg bg-white/10 backdrop-blur">
              <dt class="text-slate-300">Commercial Ready</dt>
              <dd class="font-semibold text-white">Scalable solutions</dd>
            </div>
          </dl>
        </div>

        <div id="predict" class="glass rounded-2xl p-8 shadow-2xl max-w-md mx-auto lg:mx-0">
          <h2 class="text-xl font-semibold mb-6 text-slate-800">Predict Slot Availability</h2>

          <form id="predict-form" class="space-y-5" autocomplete="off" novalidate>
            <div>
              <label for="date" class="block text-sm font-medium text-slate-800">Arrival Date</label>
              <input id="date" name="date_display" type="date" required class="mt-2 w-full rounded-md border border-slate-200 px-4 py-3 text-sm focus:ring-2 focus:ring-blue-200 focus:outline-none" aria-describedby="date-help" />
              <p id="date-help" class="text-xs text-slate-500 mt-1">Select the date; weekday is auto-calculated.</p>
            </div>

            <div id="time-section">
              <label for="time" class="block text-sm font-medium text-slate-800">Arrival Time</label>
              <div class="mt-2">
                <input id="time" name="time_native" type="time" step="900" aria-describedby="time-help" class="w-full rounded-md border border-slate-200 px-4 py-3 text-sm focus:ring-2 focus:ring-blue-200 focus:outline-none" />
                <p id="time-help" class="text-xs text-slate-500 mt-1">Choose time in 15-minute increments.</p>
              </div>

              <div id="fallback-time" class="mt-4 hidden" aria-hidden="true">
                <div class="flex gap-2">
                  <select id="fallback-hour" class="w-1/2 rounded-md border border-slate-200 px-3 py-2 text-sm" aria-label="Hour">
                    <option value="">Hour</option>
                  </select>
                  <select id="fallback-minute" class="w-1/2 rounded-md border border-slate-200 px-3 py-2 text-sm" aria-label="Minute">
                    <option value="">Minute</option>
                    <option value="0">00</option>
                    <option value="15">15</option>
                    <option value="30">30</option>
                    <option value="45">45</option>
                  </select>
                </div>
                <p class="text-xs text-slate-500 mt-2">Fallback for unsupported browsers.</p>
              </div>
            </div>

            <div>
              <div id="error-msg" role="alert" aria-live="polite" class="text-sm text-red-600 hidden"></div>
            </div>

            <div>
              <button id="submit-btn" type="submit" class="w-full inline-flex items-center justify-center gap-3 rounded-lg bg-gradient-to-r from-blue-600 to-cyan-500 px-4 py-3 text-sm font-semibold text-white shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-300 transition">
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span id="btn-label">Get Prediction</span>
              </button>
            </div>

            <p class="text-xs text-slate-500 mt-3">Data processed securely; predictions based on IoT sensor history.</p>
          </form>
        </div>
      </div>
    </section>

        
        </form>
      </div>
    </section>

    <section id="how" class="max-w-6xl mx-auto px-4 py-16">
      <h2 class="text-3xl font-bold mb-12 text-center">How Our IoT & AI Solution Works</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
        <div class="space-y-6">
          <div class="flex items-start gap-4">
            <img src="https://images.unsplash.com/photo-1558346490-a72e53ae2d4f?auto=format&fit=crop&w=400&q=80" alt="IoT sensors in parking lot" class="w-16 h-16 rounded-lg object-cover shadow" />
            <div>
              <h3 class="text-xl font-semibold mb-2">IoT Sensor Network</h3>
              <p class="text-slate-600">Deployed sensors in commercial parking facilities collect real-time occupancy data, transmitting updates every few minutes for accurate monitoring.</p>
            </div>
          </div>
          <div class="flex items-start gap-4">
            <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=400&q=80" alt="AI machine learning dashboard" class="w-16 h-16 rounded-lg object-cover shadow" />
            <div>
              <h3 class="text-xl font-semibold mb-2">AI Model Training</h3>
              <p class="text-slate-600">Historical sensor data trains our machine learning model to recognize patterns in parking behavior, enabling predictive analytics for slot availability.</p>
            </div>
          </div>
        </div>
        <div class="space-y-6">
          <div class="flex items-start gap-4">
            <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&w=400&q=80" alt="Real-time predictions" class="w-16 h-16 rounded-lg object-cover shadow" />
            <div>
              <h3 class="text-xl font-semibold mb-2">Real-Time Predictions</h3>
              <p class="text-slate-600">Input your arrival details to receive instant predictions on free slots, helping commercial operators optimize space and reduce customer wait times.</p>
            </div>
          </div>
          <div class="flex items-start gap-4">
            <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=400&q=80" alt="Scalable commercial solution" class="w-16 h-16 rounded-lg object-cover shadow" />
            <div>
              <h3 class="text-xl font-semibold mb-2">Scalable for Businesses</h3>
              <p class="text-slate-600">Designed for commercial parking management, our solution scales with facility size and integrates with existing IoT infrastructure for seamless operations.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-slate-900 text-white">
    <div class="max-w-6xl mx-auto px-4 py-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <div class="flex items-center gap-3 mb-4">
            <div class="h-10 w-10 rounded-lg bg-gradient-to-br from-blue-600 to-cyan-500 flex items-center justify-center text-white font-bold">P</div>
            <div>
              <div class="text-lg font-semibold">ParkIQ</div>
              <div class="text-sm text-slate-400">IoT & AI Parking Solutions</div>
            </div>
          </div>
          <p class="text-sm text-slate-300">Empowering commercial parking operators with IoT sensor data and AI-driven predictions for optimized space management.</p>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Solutions</h4>
          <ul class="space-y-2 text-sm text-slate-300">
            <li><a href="#" class="hover:text-white transition">IoT Sensor Deployment</a></li>
            <li><a href="#" class="hover:text-white transition">AI Prediction Models</a></li>
            <li><a href="#" class="hover:text-white transition">Real-Time Analytics</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Support</h4>
          <ul class="space-y-2 text-sm text-slate-300">
            <li><a href="#" class="hover:text-white transition">Documentation</a></li>
            <li><a href="#" class="hover:text-white transition">API Reference</a></li>
            <li><a href="#" class="hover:text-white transition">Contact Us</a></li>
          </ul>
        </div>
      </div>
      <div class="mt-8 pt-6 border-t border-slate-700 text-xs text-slate-400 flex flex-col sm:flex-row justify-between">
        <span>© 2025 ParkIQ. All rights reserved.</span>
        <div class="flex gap-4 mt-2 sm:mt-0">
          <a href="#" class="hover:text-white transition">Privacy Policy</a>
          <a href="#" class="hover:text-white transition">Terms of Service</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    const timeInput = document.getElementById('time');
    const fallbackWrapper = document.getElementById('fallback-time');
    const fallbackHour = document.getElementById('fallback-hour');
    const fallbackMinute = document.getElementById('fallback-minute');
    const form = document.getElementById('predict-form');
    const dateInput = document.getElementById('date');
    const errorMsg = document.getElementById('error-msg');
    const submitBtn = document.getElementById('submit-btn');
    const btnLabel = document.getElementById('btn-label');

    function supportsTimeInput() {
      const input = document.createElement('input');
      input.setAttribute('type', 'time');
      input.value = '13:00';
      return input.type === 'time' && input.value === '13:00';
    }

    function populateHourOptions() {
      for (let h = 0; h < 24; h++) {
        const opt = document.createElement('option');
        opt.value = String(h);
        opt.textContent = String(h).padStart(2, '0') + ':00';
        fallbackHour.appendChild(opt);
      }
    }

    if (!supportsTimeInput()) {
      fallbackWrapper.classList.remove('hidden');
      fallbackWrapper.setAttribute('aria-hidden', 'false');
      timeInput.setAttribute('aria-hidden', 'true');
      timeInput.style.display = 'none';
      populateHourOptions();
    }

    function setError(text) {
      if (!text) {
        errorMsg.classList.add('hidden');
        errorMsg.textContent = '';
      } else {
        errorMsg.classList.remove('hidden');
        errorMsg.textContent = text;
        errorMsg.focus();
      }
    }

    function parseTimeFromInputs() {
      if (!supportsTimeInput()) {
        const h = fallbackHour.value;
        const m = fallbackMinute.value;
        if (!h || m === '') return null;
        const hour = parseInt(h,10);
        const minute = parseInt(m,10);
        return {hour, minute};
      } else {
        if (!timeInput.value) return null;
        const parts = timeInput.value.split(':');
        if (parts.length < 2) return null;
        let hour = parseInt(parts[0],10);
        let minute = parseInt(parts[1],10);
        if (isNaN(hour) || isNaN(minute)) return null;
        // ensure 15-min alignment (step=900 should already enforce this)
        const roundedQ = Math.round(minute / 15) * 15;
        if (roundedQ === 60) { hour = (hour + 1) % 24; minute = 0; } else minute = roundedQ;
        return {hour, minute};
      }
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      setError('');
      const dateVal = dateInput.value;
      if (!dateVal) {
        setError('Please select an arrival date.');
        return;
      }
      const time = parseTimeFromInputs();
      if (!time) {
        setError('Please select an arrival time.');
        return;
      }
      const parts = dateVal.split('-');
      if (parts.length !== 3) {
        setError('Invalid date format.');
        return;
      }
      const y = parseInt(parts[0],10);
      const m = parseInt(parts[1],10) - 1;
      const d = parseInt(parts[2],10);
      const localDate = new Date(y, m, d);
      if (isNaN(localDate.getTime())) {
        setError('Invalid date.');
        return;
      }
      const jsDay = localDate.getDay();
      const weekday = (jsDay + 6) % 7;
      submitBtn.disabled = true;
      btnLabel.textContent = 'Preparing…';
      const params = new URLSearchParams();
      params.set('hour', String(time.hour));
      params.set('minute', String(time.minute));
      params.set('day', String(weekday));
      window.location.href = `/predictions?${params.toString()}`;
    });

    document.addEventListener('DOMContentLoaded', () => {
      dateInput.setAttribute('min', new Date().toISOString().slice(0,10));
    });
  </script>
</body>
</html>
